<p align="center">
  <a href="./README_en.md">English</a>
  &middot;
  <a href="./README.md">简/</a>
  <a href="./README_zh-Hant.md">繁體中文</a>
  &middot;
  <a href="./README_ja.md">日本語</a>
</p>

# GLIBC シンボルバージョン適応ツール
このプロジェクトは、ELFファイル、または指定されたディレクトリ内のすべてのELFファイルを変更し、異なるバージョンの GLIBC (libc.so.6) に適応させるためのELFユーティリティです。
プロジェクトのコンセプトは ReferenceData/ModifiersSolym.c に基づいています（参考となるコメントがファイル内に含まれています）。

**主な違い:**
参照ファイル（固定バージョンを使用）とは異なり、このプロジェクトはより強力です：
1. ユーザーが指定した libc.so.6 (引数1) から、サポートされているすべてのシンボルバージョンを自動的に解析します。
2. ターゲットELFファイルまたはディレクトリ (引数2) が要求するシンボルバージョンの依存関係を自動的に修正（パッチ）し、提供された libc と互换性を持たせます。

**使用方法:**

```bash
# ./[プログラム名] [ホストlibc.so.6のパス] [適応させたいELFファイルまたはディレクトリのパス]
./your_program /path/to/your/libc.so.6 /path/to/target_elf_or_directory
```

# 警告：ABI互換性について

- 本ツールは、ELFファイル内のシンボルバージョン・メタデータ（.gnu.version および .gnu.version_r セクション）を 変更するだけ です。
- GLIBCのバージョン変更によって引き起こされる ABI (アプリケーション・バイナリ・インターフェース) の非互換性 については、一切チェックも修正も 行いません（行うこともできません）。
- もし関数（例：memcpy や fopen）の動作、引数、またはその内部で使用されるデータ構造（struct）が新旧の libc バージョン間で異なる場合、たとえシンボルバージョンの「ダウングレード」に成功したとしても、プログラムは実行時にABIの不一致によりクラッシュ（セグメンテーション違反など）したり、不正なデータを生成したりする可能性が非常に高いです。
- 本ツールは、使用者が新旧GLIBCバージョン間のABIが完全に互換であることを独自に確認済みであることを前提としています。ご自身が何をしているかを正確に理解している場合にのみ使用してください。

**その他の注意事項とリスク**

- シンボル依存: 適応が成功するための前提条件は、ターゲットELFが使用するすべてのシンボルが、指定された（通常は古いバージョンの）libc.so.6 に 物理的に存在する ことです。
- エラーログ: 適応に失敗した場合、プログラムディレクトリ内のエラーログ (例: Errlog.txt) を確認してください。どのファイルのどのシンボルが原因で失敗したかが記録されています。
- 安定性リスク: 特殊な構造を持つELFファイルの処理中、稀にセグメンテーション違反が発生する可能性があります。
- ファイルのバックアップ: 本ツールはファイル操作に関するフォールトトレランス（mmap と msync を使用）を備えていますが、操作の低レベルな性質を考慮し、使用前に必ずすべてのターゲットELFファイルをバックアップする ことを強く推奨します。

